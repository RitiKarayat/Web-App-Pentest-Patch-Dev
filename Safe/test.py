import subprocess
import zipfile
from io import BytesIO
from flask import send_file,send_from_directory
from sqlalchemy import true
import os
import time
def skipfish(url):

    num = 11
    cmd = f'skipfish -k 00:00:10 -o ./sf_test_{num} {url}'
    print('started')
    #cmd = './while.sh'
    stream = subprocess.run(cmd, shell=True, executable='/bin/bash', stdout=subprocess.PIPE , input='enter\n', text=True)#, stderr=subprocess.PIPE, stdin=subprocess.PIPE , text=True  , check=True)
    #print(stream.stdout.decode())

    # stream.stdin.write('Enter')
    # #stream.stdin.write('Press')
    # stream.stdin.close()
    print('done')


   
url = input('Enter a url ')
skipfish(url)

# start = time.time()
# while True:
#     if time.time()-start > 120:
#         break
# stream.terminate()
# print(stream.poll())


# comm = ''
# kill = subprocess.run(comm)
#print(stream.stdout)
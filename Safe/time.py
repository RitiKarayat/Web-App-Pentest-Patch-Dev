import subprocess
import os
import signal
cmd = 'while [ 1 ]; do echo "run"; done'
pro = subprocess.Popen(cmd, stdout=subprocess.PIPE, 
                       shell=True, executable='/bin/bash' , preexec_fn=os.setsid) 

os.killpg(os.getpgid(pro.pid), signal.SIGTERM)
